<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia Site Renderer 1.4 at 2013-08-15 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Joda-Convert - 
  Joda Convert</title>
    <style type="text/css" media="all">
      @import url("./css/maven-base.css");
      @import url("./css/maven-theme.css");
      @import url("./css/site.css");
    </style>
    <link rel="stylesheet" href="./css/print.css" type="text/css" media="print" />
      <meta name="author" content="Stephen Colebourne" />
    <meta name="Date-Revision-yyyymmdd" content="20130815" />
    <meta http-equiv="Content-Language" content="en" />
        
        </head>
  <body class="composite">
    <div id="banner">
                        <a href="http://joda.sourceforge.net/" id="bannerLeft">
                Joda.org
                </a>
                                            <a href="./" id="bannerRight">
                Joda-Convert
                </a>
            <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
            
                    
                <div class="xleft">
        <span id="projectVersion">Version: 1.4-SNAPSHOT</span>
              </div>
            <div class="xright">        
                    
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
             
                    
                                <h5>Joda Convert</h5>
                  <ul>
                  <li class="none">
                          <a href="index.html" title="Overview">Overview</a>
            </li>
                  <li class="none">
            <strong>User guide</strong>
          </li>
                  <li class="none">
                          <a href="apidocs/index.html" title="Javadoc">Javadoc</a>
            </li>
                  <li class="none">
                          <a href="license.html" title="License">License</a>
            </li>
                  <li class="none">
                          <a href="changes-report.html" title="Release notes">Release notes</a>
            </li>
                  <li class="none">
                          <a href="http://sourceforge.net/projects/joda-convert/files/joda-convert/" class="externalLink" title="Download">Download</a>
            </li>
          </ul>
                       <h5>Development</h5>
                  <ul>
                  <li class="none">
                          <a href="https://github.com/JodaOrg/joda-convert" class="externalLink" title="GitHub">GitHub</a>
            </li>
                  <li class="none">
                          <a href="https://github.com/JodaOrg/joda-convert/issues" class="externalLink" title="Bugs/Issues">Bugs/Issues</a>
            </li>
                  <li class="none">
                          <a href="mail-lists.html" title="Mailing lists">Mailing lists</a>
            </li>
                  <li class="none">
                          <a href="http://sourceforge.net/projects/joda-convert/" class="externalLink" title="Sourceforge">Sourceforge</a>
            </li>
          </ul>
                       <h5>Joda</h5>
                  <ul>
                  <li class="none">
                          <a href="http://joda.sourceforge.net" class="externalLink" title="Joda home">Joda home</a>
            </li>
                  <li class="none">
                          <a href="http://joda-beans.sourceforge.net/index.html" class="externalLink" title="Beans">Beans</a>
            </li>
                  <li class="none">
                          <a href="http://joda-money.sourceforge.net/index.html" class="externalLink" title="Money">Money</a>
            </li>
                  <li class="none">
                          <a href="http://joda-primitives.sourceforge.net/index.html" class="externalLink" title="Primitives">Primitives</a>
            </li>
                  <li class="none">
                          <a href="http://joda-time.sourceforge.net/index.html" class="externalLink" title="Time">Time</a>
            </li>
          </ul>
                       <h5>Project Documentation</h5>
                  <ul>
                                                                                                                                                                                                  <li class="collapsed">
                          <a href="project-info.html" title="Project Information">Project Information</a>
                  </li>
                                                                                                                                            <li class="collapsed">
                          <a href="project-reports.html" title="Project Reports">Project Reports</a>
                  </li>
          </ul>
                       <h5>Website</h5>
                  <ul>
                  <li class="none">
                          <a href="privacy.html" title="Privacy">Privacy</a>
            </li>
          </ul>
                                                                                                                               <a href="http://sourceforge.net/projects/joda-convert/" title="Sourceforge" class="poweredBy">
        <img class="poweredBy"  alt="Sourceforge" src="http://sflogo.sourceforge.net/sflogo.php?group_id=344317&type=13"   width="120"  height="30"  />
      </a>
                       
                    
                <div id="lastPublished">
        <span id="publishDate">Last Published: 2013-08-15</span>
              </div>
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        

 

<div class="section">
<h2>User guide<a name="User_guide"></a></h2>


<p>
Joda-Convert is intended for one simple task -
Converting objects to and from strings.
This is a common problem, particularly when communicating over textual protocols like XML or JSON.
</p>


<div class="section">
<h3>Basic usage<a name="Basic_usage"></a></h3>

<p>
Using Joda-Convert is easy at the simplest level.
The main access is via the class <tt>StringConvert</tt>.
</p>

<p>
The easiest way to use the conversion is via the global constant:
</p>

<div style="border:1px solid black; padding: 0px 6px; margin: 4px;">
<div>
<pre>
// conversion to a String
TimeZone zone = ...
String str = StringConvert.INSTANCE.convertToString(zone);

// conversion from a String
TimeZone zone = StringConvert.INSTANCE.convertFromString(TimeZone.class, str);
</pre></div></div>

<p>
In both cases, if the input is <tt>null</tt> then the output will also be <tt>null</tt>.
</p>

<p>
The global constant is quick and easy to use, but is shared between all users in the <tt>ClassLoader</tt>.
It also cannot be extended.
</p>

<p>
The alternative approach is to instantiate your own instance of <tt>StringConvert</tt>.
This would normally be stored in your own static variable, or made available as needed by dependency injection.
This may be updated by registering your own converters.
</p>
</div>


<div class="section">
<h3>Converters<a name="Converters"></a></h3>

<p>
Each instance of <tt>StringConvert</tt>, including the global singleton, includes a standard set of JDK-based converters.
These cover all the standard JDK types for which conversion to and from a string is sensible.
The set also includes JSR-310 types, but these are optional and loaded by reflection. The system will run without any dependency.
</p>

<p>
Each <tt>StringConvert</tt> instance, other than the global singleton, may have additional converters registered manually.
Each converter implements the <tt>StringConverter</tt> interface, which is self explanatory.
</p>

<p>
Converters may also be manually added by method name.
This is equivalent to using annotations, but suitable when you don't own the code to add them.
See <tt>StringConvert.registerMethods</tt> and <tt>StringConvert.registerMethodConstructor</tt>.
</p>

<p>
A converter can only be registered if one is not already registered for that type.
</p>
</div>


<div class="section">
<h3>Annotation based conversion<a name="Annotation_based_conversion"></a></h3>

<p>
If there is no registered converter for a type, then a search by annotation is performed.
This will search for the <tt>ToString</tt> and <tt>FromString</tt> annotation on the type.
These annotations will indicate which method should be called to perform the conversion.
</p>

<div style="border:1px solid black; padding: 0px 6px; margin: 4px;">
<div>
<pre>
public class Distance {

  @FromString
  public static Distance parse(String str) { ... }

  @ToString
  public String getStandardOutput() { ... }

}
</pre></div></div>

<p>
To be valid, the class must contain one <tt>ToString</tt> annotation and one <tt>FromString</tt> annotation.
The <tt>ToString</tt> annotation must be an instance method taking no parameters and returning a String.
The <tt>FromString</tt> annotation must be either a static method or a constructor taking a String parameter and
returning the correct type.
If the annotations are not found on the target class, then superclasses are searched, followed by immediate parent interfaces.
</p>

<p>
Sometimes, you want to provide to/from string conversions for interfaces.
In JDK 8 this can be done using static methods on interfaces.
However in earlier versions, a separate &quot;factory&quot; class is necessary.
This can also be annotated:
</p>

<div style="border:1px solid black; padding: 0px 6px; margin: 4px;">
<div>
<pre>
@FromStringFactory(factory = DistanceFactory.class)
public interface Distance {

  @ToString
  String standardFormat();

}

public class Metres implements Distance {

  @Override
  public String standardFormat() { ... }

}

public class DistanceFactory {

  @FromString
  public static Distance parseDistance(String str) { ... }

}
</pre></div></div>

<p>
The <tt>FromStringFactory</tt> annotation points at the factory class that will provide the factory method.
Although intended for use with interfaces, it can also be used on the target class or any superclass.
Note that only the immediate parent interfaces of a class will be searched.
</p>
</div>


<div class="section">
<h3>Rationale<a name="Rationale"></a></h3>

<p>
The concept is that other open source libraries, as well as your application code, will implement these two annotations.
For open source projects, a key point is that adding the annotations is a compile-time only event.
The Joda-Convert jar file is not needed by your users unless they want to use conversion.
If they don't want to use Joda-Convert then the annotations are effectively ignored.
</p>

<p>
Joda-Time v2.0 and Joda-Money will both contain the annotations.
In both cases, the dependency is not a runtime for users of the projects.
</p>
</div>

</div>


      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
              Copyright &#169;                    2010-2013
                        <a href="http://www.joda.org">Joda.org</a>.
            All Rights Reserved.      
                    
                  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
